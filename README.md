# M3U8 链接监控器 Chrome插件

## 功能介绍

这是一个专门用于监控和捕获网页中M3U8文件请求的Chrome插件。它能够：

- ✅ **实时监控网络请求** - 自动捕获所有M3U8相关的网络请求
- ✅ **多种检测方式** - 结合网络API和内容脚本，确保不遗漏任何M3U8链接
- ✅ **智能识别** - 不仅识别.m3u8文件，还能识别HLS相关的流媒体链接
- ✅ **友好界面** - 清晰显示捕获的链接信息，包括时间、域名、来源等
- ✅ **便捷操作** - 支持复制单个链接、批量复制、导出等功能
- ✅ **持久存储** - 捕获的链接会保存在本地，关闭浏览器后不会丢失

## 安装方法

### 1. 下载插件文件
确保您已经下载了包含以下文件的chrome_extension文件夹：
- manifest.json
- background.js
- content.js
- popup.html
- popup.js

### 2. 安装到Chrome浏览器

1. **打开Chrome浏览器**

2. **进入扩展程序管理页面**
   - 在地址栏输入：`chrome://extensions/`
   - 或者点击右上角菜单 → 更多工具 → 扩展程序

3. **启用开发者模式**
   - 在扩展程序页面右上角打开"开发者模式"开关

4. **加载插件**
   - 点击"加载已解压的扩展程序"按钮
   - 选择chrome_extension文件夹
   - 点击"选择文件夹"

5. **确认安装**
   - 插件安装成功后会显示在扩展程序列表中
   - 您可以看到"M3U8 Network Monitor"插件

### 3. 固定插件到工具栏（推荐）

1. 点击Chrome地址栏右侧的扩展程序图标（拼图形状）
2. 找到"M3U8 Network Monitor"
3. 点击右侧的固定图标📌

## 使用方法

### 1. 基本使用
1. 安装插件后，访问任何包含视频的网站
2. 播放视频或浏览包含M3U8流的页面
3. 插件会自动在后台监控和捕获M3U8链接
4. 点击插件图标查看捕获的链接

### 2. 查看捕获结果
- **实时统计**：插件界面顶部显示已捕获的M3U8文件数量
- **详细信息**：每个链接显示URL、域名、时间和来源
- **刷新数据**：点击"刷新"按钮更新显示

### 3. 操作链接
- **复制单个链接**：点击每个项目下的"复制链接"按钮
- **复制所有链接**：点击"复制所有链接"按钮，一次性复制所有URL
- **导出数据**：点击"导出"按钮，下载包含详细信息的JSON文件
- **保存为文本**：点击"保存为TXT"按钮，下载纯文本格式的链接列表



### 4. 清理数据
- 点击"清空"按钮可以清除所有已捕获的链接
- 数据清空后无法恢复，请谨慎操作

## 技术优势

相比之前的Selenium + JavaScript注入方案，Chrome插件具有以下优势：

1. **更可靠的网络监控**
   - 直接使用Chrome的webRequest API
   - 能捕获所有类型的网络请求
   - 不受页面JavaScript环境影响

2. **更好的兼容性**
   - 不依赖Selenium WebDriver
   - 不受Chrome安全策略限制
   - 支持所有Chrome版本

3. **更高的检测精度**
   - 同时监控请求和响应
   - 检查HTTP头部信息
   - 结合内容检测和URL模式匹配

4. **更友好的用户体验**
   - 原生Chrome界面
   - 实时更新显示
   - 不干扰正常浏览

## 常见问题

### Q: 插件没有捕获到M3U8链接？
A: 请确保：
- 插件已正确安装并启用
- 访问的网站确实使用了M3U8流媒体技术
- 尝试刷新页面或重新播放视频

### Q: 捕获了很多无关链接？
A: 插件会智能过滤，只捕获真正的M3U8相关链接。如果有误报，可以通过URL和来源信息进行判断。

### Q: 如何与下载工具配合使用？
A: 复制捕获的M3U8链接，粘贴到您的下载工具中即可。推荐使用本项目的 [`m3u8_downloader.py`](../m3u8_downloader.py) 命令行工具。

## 安全说明

- 插件只监控网络请求，不收集或上传任何个人信息
- 所有数据仅存储在本地浏览器中
- 开源代码，可自行审查安全性

## 更新日志

### v2.1 (简化版本)
- ✨ **移除下载功能**：专注于M3U8链接的识别和存储
- ✨ **简化界面**：移除不必要的UI元素，体验更流畅
- ✨ **减少权限**：仅保留必要权限，提高安全性

### v2.0 (重大更新)
- ✨ **新增直接下载功能**：支持一键下载M3U8文件到本地磁盘
- 🔐 **AES-128解密支持**：自动处理加密的视频流
- 📁 **智能文件管理**：自动创建基于URL哈希的文件夹结构
- ⏱️ **实时进度显示**：下载过程可视化
- 🎨 **全新图标设计**：更加醒目美观的插件图标
- 🔍 **优化检测算法**：减少误报，提高准确度

### v1.0 (初始版本)
- 实现基本的M3U8网络监控功能
- 提供友好的popup界面
- 支持链接复制和导出功能

## 许可证

本项目采用 MIT 许可证，详情请见 [LICENSE](LICENSE) 文件。
